CREATE DATABASE QLDuAn

USE QLDuAn

SET ANSI_WARNINGS  OFF;
-- Your insert TSQL here.
--SET ANSI_WARNINGS ON;

CREATE TABLE NHANVIEN
(
    MANV	nchar(50) NOT NULL,

	HOTEN   nvarchar(50),
	NGSINH	datetime,
	DIACHI	nvarchar(50),
	PHAI	nvarchar(5),
	LUONG	float,
	CHUCVU  nvarchar(50),
	MATKHAU nvarchar(50),
	SDT nchar (50),
	EMAIL nchar (50),
	QUYENXEM nchar(10),
	QUYENSUA nchar(10),
	CAPBAC nvarchar(50),
	MANQL	nchar(50),
	MAPB	nchar(50),

    PRIMARY KEY(MANV)
)

CREATE TABLE PHONGBAN
(
	MAPB	nchar(50) NOT NULL,

	TENPHONG	 nvarchar(50),
	TRUONGPHONG  nchar(50),
	NGAYNHANCHUC datetime,

	PRIMARY KEY(MAPB)
)

CREATE TABLE DUAN
(
	MADA	 nchar(50) NOT NULL,

	TENDA	 nvarchar(50),
	NGAYBDDA   datetime,
	NGAYKTDA   datetime,
	TRUONGDA nchar(50),
	TIENDO int,
	SOLUONGGIAIDOAN int,
	LOAICACCONGVIEC nvarchar(200),
	KIEUDUANLAPLAI int,

	PRIMARY KEY(MADA)
)

CREATE TABLE TGDUAN
(
	MANV nchar(50) NOT NULL,
	MAPB nchar(50) NOT NULL,
	MADA nchar(50) NOT NULL,
	GIAIDOAN nchar(50) NOT NULL,
	THOIGIANTHIETLAP datetime NOT NULL,
	
	NGAYBDTG datetime,
	NGAYKTTG datetime,
	MUCDOHOANTHANH  int,
	NHIEMVU	nvarchar(200),
	TENGIAIDOAN nvarchar(50),
	TRANGTHAI nvarchar(50),
	GHICHU nvarchar(50),
	SOLUONGNGAYTRE nchar(50),
	KHOACONGVIEC nchar(50),
	NHOMINAN nvarchar(50),

	PRIMARY KEY(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP)
)

CREATE TABLE DINHKEM
(
	MANV nchar(50) NOT NULL,
	MAPB nchar(50) NOT NULL,
	MADA nchar(50) NOT NULL,
	GIAIDOAN nchar(50) NOT NULL,
	THOIGIAN datetime NOT NULL,
	
	TENFILE nvarchar(50),
	CHUTHICH nvarchar(50),

	PRIMARY KEY(MANV, MAPB, MADA, GIAIDOAN, THOIGIAN)
)

CREATE TABLE LICHSU
(
	MANV nchar(50) NOT NULL,
	THOIGIAN datetime  NOT NULL,
	HOATDONG nvarchar(50) NOT NULL,
	TRANGTHAI nvarchar(50) NOT NULL,

	PRIMARY KEY(MANV,THOIGIAN, HOATDONG, TRANGTHAI)
)

ALTER TABLE NHANVIEN
ADD CONSTRAINT FK_NHANVIEN_NHANVIEN
FOREIGN KEY (MANQL)
REFERENCES NHANVIEN(MANV)

ALTER TABLE NHANVIEN
ADD CONSTRAINT FK_NHANVIEN_PHONGBAN
FOREIGN KEY (MAPB)
REFERENCES PHONGBAN(MAPB)

ALTER TABLE PHONGBAN
ADD CONSTRAINT FK_PHONGBAN_NHANVIEN
FOREIGN KEY (TRUONGPHONG)
REFERENCES NHANVIEN(MANV)

ALTER TABLE TGDUAN
ADD CONSTRAINT FK_TGDUAN_NHANVIEN
FOREIGN KEY (MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE TGDUAN
ADD CONSTRAINT FK_TGDUAN_PHONGBAN
FOREIGN KEY (MAPB)
REFERENCES PHONGBAN(MAPB)

ALTER TABLE TGDUAN
ADD CONSTRAINT FK_TGDUAN_DUAN
FOREIGN KEY (MADA)
REFERENCES DUAN(MADA)

ALTER TABLE DUAN
ADD CONSTRAINT FK_DUAN_NHANVIEN
FOREIGN KEY (TRUONGDA)
REFERENCES NHANVIEN(MANV)

ALTER TABLE DINHKEM
ADD CONSTRAINT FK_DINHKEM_NHANVIEN
FOREIGN KEY (MANV)
REFERENCES NHANVIEN(MANV)

ALTER TABLE DINHKEM
ADD CONSTRAINT FK_DINHKEM_PHONGBAN
FOREIGN KEY (MAPB)
REFERENCES PHONGBAN(MAPB)

ALTER TABLE DINHKEM
ADD CONSTRAINT FK_DINHKEM_DUAN
FOREIGN KEY (MADA)
REFERENCES DUAN(MADA)

INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('thivong', N'Phạm Thị Vọng', '03/03/1985', N'Quận Gò Vấp, Tp Hồ Chí Minh', N'Nữ', '10000', N'Trưởng phòng kinh doanh',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Admin', null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('thihao', N'Trần Thị Hào', '06/07/1991', N'Quận 1, Tp Hồ Chí Minh', N'Nữ', '5500', N'Thiết kế', N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('vancuong', N'Đào Văn Cường', '11/03/1992', N'Quận 2, Tp Hồ Chí Minh', N'Nam', '6000', N'Digital Marketing', N'123','0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('ngocquyen', N'Vương Ngọc Quyền', '01/01/1988', N'Thủ Đức, Tp Hồ Chí Minh', N'Nữ', '5500', N'Thiết kế', N'123','0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('thilinh', N'Phạm Thị Linh', '03/04/1983', N'Quận Thủ Đức, Tp Hồ Chí Minh', N'Nữ', '5000', N'Phiên dịch viên', N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('thienly', N'Nguyễn Thiên Lý', '12/22/1997', N'Quận Thủ Đức, Tp Hồ Chí Minh', N'Nam', '10000', N'Thị Trường',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('xuantrang', N'Nguyễn Xuân Trang', '01/03/1997', N'Quận Gò Vấp, Tp Hồ Chí Minh', N'Nữ', '10000', N'Thị Trường',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('quanglam', N'Đặng Quang Lãm', '08/12/1998', N'Quận Thủ Đức, Tp Hồ Chí Minh', N'Nam', '5000', N'Software marketing',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('silinh', N'Ngô Quốc Sĩ Linh', '06/12/1998', N'Quận Thủ Đức, Tp Hồ Chí Minh', N'Nam', '5000', N'Software marketing',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)
INSERT INTO NHANVIEN(MANV, HOTEN, NGSINH, DIACHI, PHAI, LUONG, CHUCVU, MATKHAU, SDT, EMAIL, QUYENXEM, QUYENSUA, CAPBAC, MANQL, MAPB) VALUES
('congkiet', N'Võ Công Kiệt', '09/17/1998', N'Quận Thủ Đức, Tp Hồ Chí Minh', N'Nam', '5000', N'Software marketing',N'123', '0973446184', 'nguyenmit2012@gmail.com', 'yes', 'yes', N'Member',null, null)

INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('Marketing', N'Marketing', 'thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('Design', N'Design', 'thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('RSD', N'RSD','thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('ShopStaff', N'Shop Staff','thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('WareHouse', N'Ware House','thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('Purchase', N'Purchase','thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('CustomerService', N'Customer Service','thivong', '12-22-2009')
INSERT INTO PHONGBAN(MAPB, TENPHONG, TRUONGPHONG, NGAYNHANCHUC)  VALUES 
('HR', N'HR','thivong', '12-22-2009')

INSERT INTO DUAN(MADA, TENDA, NGAYBDDA, NGAYKTDA, TRUONGDA, TIENDO, SOLUONGGIAIDOAN, LOAICACCONGVIEC, KIEUDUANLAPLAI) VALUES
('GG', N'Chương trình giảm giá', '04/05/2018','05/05/2018', 'thivong', '0','3', '0', '0')
INSERT INTO DUAN(MADA, TENDA, NGAYBDDA, NGAYKTDA, TRUONGDA, TIENDO, SOLUONGGIAIDOAN, LOAICACCONGVIEC, KIEUDUANLAPLAI) VALUES
('DM', N'Chương trình demo sự kiện', '06/05/2018','06/05/2018', 'thivong', '0','8', '0', '0')
INSERT INTO DUAN(MADA, TENDA, NGAYBDDA, NGAYKTDA, TRUONGDA, TIENDO, SOLUONGGIAIDOAN, LOAICACCONGVIEC, KIEUDUANLAPLAI) VALUES
('KM', N'Chương trình khuyến mãi tròn 9 tuổi', '03/05/2018','03/05/2018', 'thivong', '100','3','0', '0')
INSERT INTO DUAN(MADA, TENDA, NGAYBDDA, NGAYKTDA, TRUONGDA, TIENDO, SOLUONGGIAIDOAN, LOAICACCONGVIEC, KIEUDUANLAPLAI) VALUES
('IA', N'Dự án in ấn',  '01/01/2018','12/31/2018', 'thivong', '0','3','0', '0')


INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC,NHOMINAN) VALUES
('thivong', 'Design', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'Thiết Kế', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thihao', 'Design', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'Thiết Kế', N'Chuẩn bị',N'Chưa xác nhận',null, '0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('vancuong', 'RSD', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'Lập Bảng', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('ngocquyen', 'ShopStaff', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'Lên kế hoạch', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thilinh', 'WareHouse', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '0', N'Lênh Kế Hoạch', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thienly', 'Marketing', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '0', N'Thiết Kế', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('xuantrang', 'CustomerService', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '0', N'Thiết Kế', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('quanglam', 'Marketing', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'lên ý tưởng', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('silinh', 'Marketing', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '100', N'Lên ý tưởng', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('congkiet', 'Marketing', 'GG', '1', '2018-12-22 18:10:22.000', '04/05/2018', '04/15/2018', '0', N'Lên ý tưởng', N'Chuẩn bị',N'Chưa xác nhận',null,'0', 'true', null)

INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thivong', 'Design', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '100', N'Vẽ quảng cáo', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thihao', 'Design', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '65', N'Vẽ quảng cáo', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('vancuong', 'RSD', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '62', N'Lập bảng biểu', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('ngocquyen', 'ShopStaff', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '100', N'Trưng bày', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thilinh', 'WareHouse', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '23', N'Trưng bày', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thienly', 'Marketing', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '25', N'Làm software 1', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('xuantrang', 'CustomerService', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '87', N'Thiết Kế', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('quanglam', 'Marketing', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '100', N'Làm software 1', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('silinh', 'Marketing', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '100', N'Làm software 1', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('congkiet', 'Marketing', 'GG', '2', '2018-12-22 18:10:22.000', '04/15/2018', '04/25/2018', '100', N'Làm software 1', N'Thực hiện',N'Chưa xác nhận',null,'0', 'true', null)

INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thivong', 'Design', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành vẽ quảng cáo', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thihao', 'Design', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành vẽ quảng cáo', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('vancuong', 'RSD', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành lập bảng biểu', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('ngocquyen', 'ShopStaff', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành Trưng bày', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thilinh', 'WareHouse', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành Trưng bày', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('thienly', 'Marketing', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành software 1', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('xuantrang', 'CustomerService', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành Thiết Kế', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('quanglam', 'Marketing', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0', N'Hoàn thành software 1', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI,GHICHU, SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('silinh', 'Marketing', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0',  N'Hoàn thành software 1',  N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)
INSERT INTO TGDUAN(MANV, MAPB, MADA, GIAIDOAN, THOIGIANTHIETLAP, NGAYBDTG, NGAYKTTG, MUCDOHOANTHANH, NHIEMVU, TENGIAIDOAN, TRANGTHAI, GHICHU,SOLUONGNGAYTRE, KHOACONGVIEC, NHOMINAN) VALUES
('congkiet', 'Marketing', 'GG', '3', '2018-12-22 18:10:22.000', '04/25/2018', '05/05/2018', '0',  N'Hoàn thành software 1', N'Tổng kết',N'Chưa xác nhận',null,'0', 'true', null)

drop database QLDuAn

INSERT INTO TGDUAN VALUES ('congkiet', 'Marketing','IA' , '1', '7/1/2018 9:52:38 PM','7/1/2018 9:52:09 PM', '7/6/2018 12:00:00 AM', '0', N'aaa', N'Chuẩn bị', N'Chưa xác nhận', N'', '', 'true', N'aa')

UPDATE DUAN SET TENDA = N'Chương trình giảm giá', NGAYBDDA = '4/5/2018 12:00:00 AM', NGAYKTDA = '5/5/2018 12:00:00 AM', TRUONGDA = 'thivong', TIENDO = '0', SOLUONGGIAIDOAN = '3', LOAICACCONGVIEC = N'Các công việc không cần phải theo trình tự trong một dự án tự xác nhận hoàn thành', KIEUDUANLAPLAI = '0' WHERE MADA = 'GG'

INSERT INTO TGDUAN VALUES ('congkiet', 'Marketing','GG' , '1', '6/28/2018 6:55:57 PM','4/5/2018 12:00:00 AM', '4/15/2018 12:00:00 AM', '100', N'lên ý tưởng', N'Chuẩn bị', N'Chưa xác nhận', N'Nhận công việc của quanglam', '0' )

--DELETE NHANVIEN WHERE MANV = 'congkiet'

SELECT DISTINCT MADA, TENDA, TRUONGDA, NGAYBDDA, NGAYKTDA, TIENDO FROM DUAN WHERE MADA NOT IN (SELECT DISTINCT DA.MADA FROM DUAN DA, TGDUAN TG WHERE DA.MADA = TG.MADA AND TG.MANV ='congkiet') ORDER BY NGAYBDDA DESC

SELECT DA.MADA, TENDA, TRUONGDA, NGAYBDDA, NGAYKTDA, TIENDO FROM DUAN DA, TGDUAN TG WHERE DA.MADA = TG.MADA AND TG.MANV = 'congkiet' AND TG.TRANGTHAI = N'Chưa xác nhận' ORDER BY DA.NGAYBDDA DESC

UPDATE TGDUAN SET SOLUONGNGAYTRE = '53.00:00:00' WHERE MANV = 'congkiet' AND MAPB =  'Marketing' AND MADA = 'GG' AND GIAIDOAN = '1'

--UPDATE NHANVIEN SET HOTEN = N'Nguyễn Công Công', NGSINH = '5/4/2018', DIACHI = N'Quận Thủ Đức', PHAI = N'Nam', LUONG = '6000', CHUCVU = N'Design', MATKHAU = N'1234', SDT = '0973446184', EMAIL = 'nguyenmit2012@gmail.com', MANQL = 'null', MAPB = 'MAPB' WHERE MANV = 'congcong'

--UPDATE TGDUAN SET TRANGTHAI = N'Chưa xác nhận' WHERE MANV = 'congkiet' AND MAPB = 'Marketing' AND MADA = 'GG'

--SELECT * FROM TGDUAN TG JOIN NHANVIEN NV ON TG.MANV = NV.MANV WHERE TG.MANV = 'congkiet' AND TG.NGAYBD >= '04/04/2018' AND TG.NGAYKT <= '04/15/2018'

--SELECT * FROM TGDUAN TG JOIN DUAN DA ON TG.MADA = DA.MADA WHERE TG.MANV = 'congkiet' AND TG.NGAYBD >= '01/01/2006 12:00 am' AND TG.NGAYKT <= '6/6/2018 1:37:53 PM'